(this["webpackJsonpso-puzzled"]=this["webpackJsonpso-puzzled"]||[]).push([[0],{14:function(e,t,i){},17:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i.n(n),c=i(4),r=i.n(c),s=(i(14),i(5)),d=i(2),o=i.p+"static/media/kitty.9149cd00.jpg",l=i(0);function u(e){var t=e.onStart;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{className:"page-header",children:Object(l.jsxs)("h1",{children:["So Puzzled!! ",Object(l.jsx)("br",{})," ",Object(l.jsx)("small",{children:"A little puzzle game for practice, written in React and jQueryUI"})]})}),Object(l.jsxs)("main",{className:"jumbotron text-center",children:[Object(l.jsx)("h2",{children:"How to play:"}),Object(l.jsxs)("ol",{className:"text-left inline-block",children:[Object(l.jsxs)("li",{children:["Click the ",Object(l.jsx)("strong",{className:"",children:"Start"})," button"]}),Object(l.jsx)("li",{children:"Memorize the image"}),Object(l.jsx)("li",{children:"Piece the image back together"}),Object(l.jsx)("li",{children:".. profit?"})]}),Object(l.jsx)("p",{children:Object(l.jsx)("button",{type:"button",className:"btn btn-success btn-lg",onClick:t,children:"Start Puzzling"})})]})]})}var h=i(6),b=i(7),j=window.jQuery,f=function(){function e(t,i,n){Object(h.a)(this,e),this.callbacks=[],this.$grid=void 0,this.$stage=void 0,this.$img=void 0,this.$grid=j(t),this.$stage=j(i),this.$img=j(n)}return Object(b.a)(e,[{key:"start",value:function(){var e=this;this.$grid.find(".piece-positioner").each((function(t,i){var n=j(i),a=n.find(".piece-wrapper");setTimeout((function(){e.scramblePiece(a),a.addClass("scramble")}),1e3),a.draggable({stack:".piece-wrapper",snap:".piece-positioner",snapMode:"inner",snapTolerance:Math.max(a.width(),a.height())/4,containment:e.$stage,start:function(){a.removeClass("animated")},stop:function(){a.addClass("animated")}}),n.droppable({tolerance:"intersect",drop:function(t,i){var n=j(this),a=j(i.draggable);a.offset(n.offset());var c=n.data("currentPiece");c&&c.data("id")!==a.data("id")&&e.scramblePiece(c),n.data("currentPiece",a),a.removeClass("scramble"),a.data("id")===n.data("id")&&(n.addClass("done").droppable("destroy"),a.draggable("destroy")),e.isFinished()&&e.callbacks.forEach((function(e){return e()}))},out:function(e,t){var i=j(t.draggable),n=j(this).data("currentPiece");n&&n.data("id")===i.data("id")&&(j(this).data("currentPiece",null),i.addClass("scramble"))}})})),j(window).resize((function(){e.$grid.find(".piece-positioner").each((function(t,i){var n=j(i),a=n.data("current-piece");a&&a.removeClass("animated").offset(n.offset()).addClass("animated"),n.find(".piece-wrapper.scramble").each((function(t,i){e.scramblePiece(j(i))}))}))}))}},{key:"isFinished",value:function(){var e;return j(".piece-positioner").each((function(t,i){return!!(e=j(i).data("currentPiece")&&j(i).data("currentPiece").data("id")===j(i).data("id"))})),!!e}},{key:"scramblePiece",value:function(e){var t,i,n=e[0].getBoundingClientRect(),a=this.$stage[0].getBoundingClientRect(),c=this.$img[0].getBoundingClientRect(),r=Math.random;a.width>c.width+3*n.width?(t=r()*(a.height-n.height),i=r()>.5?c.right+r()*(a.right-c.right-n.width):a.left+r()*(c.left-a.left-n.width)):(i=a.left+r()*(a.right-n.width),t=c.bottom+r()*(a.bottom-c.bottom-n.height)),e.offset({top:t,left:i})}},{key:"onFinished",value:function(e){this.callbacks.push(e)}}]),e}(),g=i(8);function p(e){var t=e.toggleHelp;return Object(l.jsx)("header",{className:"navbar navbar-default",children:Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsx)("div",{className:"navbar-brand",children:"So Puzzled!"}),Object(l.jsxs)("label",{className:"navbar-text pull-right",htmlFor:"help",children:[Object(l.jsx)("input",{id:"help",type:"checkbox",disabled:!t,onChange:function(e){return t&&t(!!e.target.checked)}}),"\xa0 Need Help?"]})]})})}var m=i(9);function O(e){var t=e.id,i=e.width,a=e.height,c=e.left,r=e.top,s=e.img,d=e.pieceWidth,o=e.pieceHeight,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.drawImage(s,c,r,i,a)}),[i,a,c,r,s]),Object(l.jsx)("canvas",{className:"piece-wrapper animated","data-id":t,ref:u,width:d,height:o})}function v(e){var t=e.imgSrc,i=e.width,a=e.height,c=e.onLoad,r=e.pieceSizeRatio,s=Object(n.useRef)(null);Object(n.useEffect)((function(){s.current&&i&&a&&c(s.current)}),[c,i,a]);var d=Math.min(i,a)/r,o=Math.round(i/d),u=Math.round(a/d),h=i/o,b=a/u,j=Object(n.useMemo)((function(){var e=new Image(i,a);return e.src=t,e}),[i,a,t]);return Object(l.jsx)("table",{ref:s,className:"game-grid",children:Object(l.jsx)("tbody",{children:Array(u).fill(0).map((function(e,t){return Object(l.jsx)("tr",{children:Array(o).fill(0).map((function(e,n){var c="".concat(n,",").concat(t);return Object(l.jsx)("td",{className:"piece-positioner","data-id":c,style:{width:h,height:b},children:Object(l.jsx)(O,{id:c,pieceWidth:h,pieceHeight:b,width:i,height:a,left:n*h*-1,top:t*b*-1,img:j})},n)}))},t)}))})})}function x(e){return e.width&&e.height?Object(l.jsx)(v,Object(m.a)({},e)):null}function w(e){var t=e.img,i=Object(n.useState)(!1),a=Object(d.a)(i,2),c=a[0],r=a[1],s=Object(n.useState)(!1),o=Object(d.a)(s,2),u=o[0],h=o[1],b=Object(n.useState)(!1),j=Object(d.a)(b,2),m=j[0],O=j[1],v=Object(n.useRef)(null),w=Object(n.useRef)(null),y=function(e){var t=Object(n.useState)([0,0]),i=Object(d.a)(t,2),a=i[0],c=i[1];return Object(n.useEffect)((function(){if(e){var t=new g.a((function(e){var t=e[0].contentRect;c([t.width,t.height])}));return t.observe(e),function(){return t.unobserve(e)}}}),[e]),a}(v.current),k=Object(d.a)(y,2),N=k[0],S=k[1],z=Object(n.useCallback)((function(e){if(w.current&&v.current){var t=new f(e,w.current,v.current);t.start(),h(!0),t.onFinished((function(){return window.alert("You did it!! (reload the window to play again)")}))}}),[]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p,{toggleHelp:r}),Object(l.jsxs)("div",{className:"game-wrapper",children:[Object(l.jsx)("div",{ref:w,className:"container stage"}),Object(l.jsxs)("div",{className:"grid-wrapper",children:[Object(l.jsx)("img",{alt:"Kitty",src:t,className:"\n              base-img\n              ".concat(u?"transparent":"","\n              ").concat(c?"semi-transparent":"","\n            "),ref:v,onLoad:function(){return setTimeout((function(){O(!0)}),2e3)}}),m&&Object(l.jsx)(x,{imgSrc:t,width:N,height:S,pieceSizeRatio:2,onLoad:z})]})]})]})}function y(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),i=t[0],a=t[1];return i?Object(l.jsx)(w,{img:o}):Object(l.jsx)(u,{onStart:function(){return a(!0)}})}console.log("Version: ".concat(s.a)),console.log("Build: ".concat("production")),r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("app"))},5:function(e){e.exports=JSON.parse('{"a":"2.1.0"}')}},[[17,1,2]]]);
//# sourceMappingURL=main.f7e61672.chunk.js.map