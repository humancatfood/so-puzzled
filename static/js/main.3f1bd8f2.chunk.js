(this["webpackJsonpso-puzzled"]=this["webpackJsonpso-puzzled"]||[]).push([[0],{11:function(e,t,i){},13:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a),c=i(5),r=i.n(c),s=(i(11),function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,14)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;i(e),a(e),n(e),c(e),r(e)}))}),o=i(6),d=i.p+"static/media/kitty.9149cd00.jpg",l=i(2),h=i(0);function u(e){var t=e.onStart;return Object(h.jsxs)("div",{children:[Object(h.jsx)("header",{className:"page-header",children:Object(h.jsxs)("h1",{children:["So Puzzled!! ",Object(h.jsx)("br",{})," ",Object(h.jsx)("small",{children:"A little puzzle game for practice, written in React and jQueryUI"})]})}),Object(h.jsxs)("section",{className:"jumbotron text-center",children:[Object(h.jsx)("h2",{children:"How to play:"}),Object(h.jsxs)("ol",{className:"text-left inline-block",children:[Object(h.jsxs)("li",{children:["Click the ",Object(h.jsx)("strong",{className:"",children:"Start"})," button"]}),Object(h.jsx)("li",{children:"Memorize the image"}),Object(h.jsx)("li",{children:"Piece the image back together"}),Object(h.jsx)("li",{children:".. profit?"})]}),Object(h.jsx)("p",{children:Object(h.jsx)("button",{type:"button",className:"btn btn-success btn-lg",onClick:t,children:"Start Puzzling"})})]})]})}var b=i(4);function j(e){var t=e.imgSrc,i=e.$img,n=e.onLoad,c=e.pieceSizeRatio,r=Object(a.useState)({imgWidth:i.width,imgHeight:i.height}),s=Object(l.a)(r,2),o=s[0],d=s[1],u=Object(a.useRef)();Object(a.useEffect)((function(){n(u.current)}),[n]),Object(a.useEffect)((function(){var e=function(){return d((function(e){return Object(b.a)(Object(b.a)({},e),{},{imgWidth:i.width,imgHeight:i.height})}))};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[i.width,i.height]);for(var j=o.imgWidth,p=o.imgHeight,g=Math.min(j,p)/c,m=Math.round(j/g),f=Math.round(p/g),O=j/m,v=p/f,x=0,w={width:O,height:v},C=[],N=0;N<f;N+=1){for(var y=[],S=0;S<m;S+=1){var z={width:j,height:p,left:S*O*-1,top:N*v*-1};x+=1,y.push(Object(h.jsx)("td",{className:"piece-positioner","data-id":x,style:w,children:Object(h.jsx)("div",{className:"piece-wrapper animated","data-id":x,children:Object(h.jsx)("img",{alt:"piece #".concat(x),src:t,className:"piece",style:z})})},S))}C.push(Object(h.jsx)("tr",{children:y},N))}return Object(h.jsx)("table",{ref:u,className:"game-grid",children:Object(h.jsx)("tbody",{children:C})})}var p=window.jQuery;function g(e,t,i){this.$grid=p(e),this.$stage=p(t),this.$img=p(i),this.callbacks={}}g.prototype.events={FINISHED:0},g.prototype.start=function(){this.$img.addClass("transparent");var e=this;this.$grid.find(".piece-positioner").each((function(){var t=p(this),i=t.find(".piece-wrapper");setTimeout((function(){e.scramblePiece(i),i.addClass("scramble")}),1e3),i.draggable({stack:".piece-wrapper",snap:".piece-positioner",snapMode:"inner",snapTolerance:Math.max(i.width(),i.height())/4,containment:e.$stage,start:function(){i.removeClass("animated")},stop:function(){i.addClass("animated")}}),t.droppable({tolerance:"intersect",drop:function(t,i){var a=p(this),n=p(i.draggable);n.offset(a.offset());var c=a.data("currentPiece");if(c&&c.data("id")!==n.data("id")&&e.scramblePiece(c),a.data("currentPiece",n),n.removeClass("scramble"),n.data("id")===a.data("id")&&(a.addClass("done").droppable("destroy"),n.draggable("destroy")),e.isFinished()){var r=e.callbacks[e.events.FINISHED];r&&r(e)}},out:function(e,t){var i=p(t.draggable),a=p(this).data("currentPiece");a&&a.data("id")===i.data("id")&&(p(this).data("currentPiece",null),i.addClass("scramble"))}})})),p(window).resize((function(){e.$grid.find(".piece-positioner").each((function(){var t=p(this),i=t.data("current-piece");i&&i.removeClass("animated").offset(t.offset()).addClass("animated"),t.find(".piece-wrapper.scramble").each((function(t,i){e.scramblePiece(p(i))}))}))}))},g.prototype.isFinished=function(){var e;return p(".piece-positioner").each((function(){return!!(e=p(this).data("currentPiece")&&p(this).data("currentPiece").data("id")===p(this).data("id"))})),!!e},g.prototype.scramblePiece=function(e){var t,i,a=e[0].getBoundingClientRect(),n=this.$stage[0].getBoundingClientRect(),c=this.$img[0].getBoundingClientRect(),r=Math.random;n.width>c.width+3*a.width?(t=r()*(n.height-a.height),i=r()>.5?c.right+r()*(n.right-c.right-a.width):n.left+r()*(c.left-n.left-a.width)):(i=n.left+r()*(n.right-a.width),t=c.bottom+r()*(n.bottom-c.bottom-a.height)),e.offset({top:t,left:i})},g.prototype.toggleHelp=function(e){e?this.$img.addClass("semi-transparent"):this.$img.removeClass("semi-transparent")},g.prototype.setCallback=function(e,t){this.callbacks[e]=t};var m=g;function f(e){var t=e.img,i=Object(a.useState)(null),n=Object(l.a)(i,2),c=n[0],r=n[1],s=Object(a.useState)(!1),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(a.useRef)(),p=Object(a.useRef)();Object(a.useEffect)((function(){b.current.onload=function(){setTimeout((function(){u(!0)}),2e3)}}),[]);var g=Object(a.useCallback)((function(e){var t=new m(e,p.current,b.current);t.start(),t.setCallback(t.events.FINISHED,(function(){window.alert("You did it!! (reload the window to play again)")})),r(t)}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("nav",{className:"navbar navbar-default",children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("div",{className:"navbar-brand",children:"So Puzzled!"}),Object(h.jsxs)("label",{className:"navbar-text pull-right",htmlFor:"help",children:[Object(h.jsx)("input",{id:"help",type:"checkbox",disabled:!c,onChange:function(e){return c.toggleHelp(!!e.target.checked)}}),"\xa0 Need Help?"]})]})}),Object(h.jsxs)("div",{className:"game-wrapper",children:[Object(h.jsx)("div",{ref:p,className:"container stage"}),Object(h.jsxs)("div",{className:"grid-wrapper",children:[Object(h.jsx)("img",{alt:"Kitty",src:t,className:"base-img",ref:b}),d?Object(h.jsx)(j,{imgSrc:t,$img:b.current,pieceSizeRatio:4,onLoad:g}):null]})]})]})}function O(e){var t=e.img,i=Object(a.useState)(Object(h.jsx)(u,{onStart:function(){r(Object(h.jsx)(f,{img:t}))}})),n=Object(l.a)(i,2),c=n[0],r=n[1];return c}console.log("Version: ".concat(o.a)),console.log("Build: ".concat("production")),r.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(O,{img:d})}),document.getElementById("app")),s()},6:function(e){e.exports=JSON.parse('{"a":"2.0.0"}')}},[[13,1,2]]]);
//# sourceMappingURL=main.3f1bd8f2.chunk.js.map